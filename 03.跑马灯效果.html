<html>
    <head>
<meta charset="UTF-8">

<title>VUE day 3</title>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head> 

<body>

    <div id="app">
        <input type="button" value="浪起来" @click="lang">
        <input type="button" value="低调" @click="stop">
        <p>{{msg}}</p>
    </div>

</body>
<script>
    //注意: 在 vue实例中 如果想要获取 data上的数据，或者想调用 methods中的方法
    //都要使用this.来调用

    // 注意：
    // vue实例 ，会监听直接身傻瓜 data中所有数据的改变，如果数据发生变化
    // 就会将数据同步到页面中。

    var vm = new Vue({
        el: '#app', 
        data: {  
            msg: '猥琐发育，别浪~~',
            intervalId :null //在data上定义，定时器id
        },
        methods:{
            lang(){
                //限制一次只能有一个定时器的创建。
                if (this.intervalId !=null) return;
                // 箭头函数后定时器内部的this就指向外部的this
            this.intervalId = setInterval(() =>  {
                 //截取字符串第一个，定时器每隔多少s去执行
                //截取第一个字符
                var start = this.msg.substring(0, 1)
                //截取后面的字符
                var end = this.msg.substring(1)
                //进行拼接
                this.msg = end +start
                
            }, 400)
        },
        stop(){//清除定时器
            clearInterval(this.intervalId)
            // 每当清除了定时器之后，需要重新把 interval至为null
            this.intervalId = null

        }
        }
    })
    </script>

</html>